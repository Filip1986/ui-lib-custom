:host {
  /* Component defaults (all color-sensitive values via CSS vars) */
  --uilib-card-border-width: 0;
  --uilib-card-header-padding: var(
    --uilib-card-header-padding-base,
    var(--uilib-space-3, 0.75rem) var(--uilib-space-4, 1rem)
  );
  --uilib-card-body-padding: var(--uilib-card-body-padding-base, 1.5rem);
  --uilib-card-footer-padding: var(
    --uilib-card-footer-padding-base,
    var(--uilib-space-4, 1rem) var(--uilib-space-5, 1.25rem)
  );

  display: block;
}

.card {
  background: var(--uilib-card-bg, var(--uilib-surface));
  color: var(--uilib-card-text-color, var(--uilib-page-fg));
  border-radius: var(--uilib-card-radius, var(--uilib-radius-lg));
  box-shadow: var(--uilib-card-shadow, var(--uilib-card-shadow-medium, none));
  border: var(--uilib-card-border-width, 0) solid
    var(--uilib-card-border, var(--uilib-border, currentColor));
  overflow: hidden;
  transition:
    0.2s ease box-shadow,
    0.2s ease transform;
  display: flex;
  flex-direction: column;

  &-header {
    display: flex;
    align-items: flex-start;
    gap: var(--uilib-space-2, 0.5rem);
    padding: var(--uilib-card-header-padding);
    background-color: var(
      --uilib-card-header-bg,
      var(--uilib-surface-alt, var(--uilib-card-bg, inherit))
    );
    border-bottom: 1px solid var(--uilib-card-border, var(--uilib-border, currentColor));
    font-family: var(--uilib-font-heading, inherit), sans-serif;
  }

  .card-header-text {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
    min-width: 0;
    min-height: calc((1.125rem * 1.4) + 0.125rem + (0.95rem * 1.4));
    justify-content: center;
  }

  .card-title {
    font-weight: 600;
    font-size: 1.125rem;
    line-height: 1.4;
    color: var(--uilib-card-text-color, inherit);
  }

  .card-subtitle {
    font-size: 0.95rem;
    color: var(--uilib-muted, var(--uilib-color-neutral-600));
    line-height: 1.4;
  }

  &-body {
    padding: var(--uilib-card-body-padding);
    flex: 1;
    font-family: var(--uilib-font-body, inherit), sans-serif;
  }

  &-footer {
    padding: var(--uilib-card-footer-padding);
    background-color: var(
      --uilib-card-footer-bg,
      var(--uilib-surface-alt, var(--uilib-card-bg, inherit))
    );
    border-top: 1px solid var(--uilib-card-border, var(--uilib-border, currentColor));
    font-family: var(--uilib-font-ui, inherit), sans-serif;
  }

  &-bordered {
    --uilib-card-border-width: 1px;
  }

  &-hoverable {
    cursor: pointer;

    &:hover {
      box-shadow: var(
        --uilib-card-shadow-hover,
        var(--uilib-card-shadow, var(--uilib-card-shadow-medium, none))
      );
      transform: translateY(-2px);
    }
  }

  /* Elevations */
  &-elevation-none {
    --uilib-card-shadow: var(--uilib-card-shadow-none, none);
    --uilib-card-shadow-hover: var(--uilib-card-shadow-low, var(--uilib-card-shadow-none, none));
  }

  &-elevation-low {
    --uilib-card-shadow: var(--uilib-card-shadow-low, var(--uilib-card-shadow-none, none));
    --uilib-card-shadow-hover: var(--uilib-card-shadow-medium, var(--uilib-card-shadow-low, none));
  }

  &-elevation-medium {
    --uilib-card-shadow: var(--uilib-card-shadow-medium, var(--uilib-card-shadow-low, none));
    --uilib-card-shadow-hover: var(--uilib-card-shadow-high, var(--uilib-card-shadow-medium, none));
  }

  &-elevation-high {
    --uilib-card-shadow: var(--uilib-card-shadow-high, var(--uilib-card-shadow-medium, none));
    --uilib-card-shadow-hover: var(--uilib-card-shadow-high, var(--uilib-card-shadow-medium, none));
  }

  /* Variants */
  &-material {
    --uilib-card-radius: var(--uilib-radius-md);
    --uilib-card-shadow: var(--uilib-card-shadow-medium, var(--uilib-card-shadow-low, none));
    --uilib-card-shadow-hover: var(--uilib-card-shadow-high, var(--uilib-card-shadow-medium, none));
    --uilib-card-header-bg: var(--uilib-card-header-bg, var(--uilib-surface-alt));
    --uilib-card-footer-bg: var(--uilib-card-footer-bg, var(--uilib-surface-alt));
  }

  &-bootstrap {
    --uilib-card-radius: var(--uilib-radius-sm);
    --uilib-card-border-width: 1px;
    --uilib-card-border: var(--uilib-card-border, var(--uilib-border));
    --uilib-card-header-bg: var(--uilib-card-header-bg, var(--uilib-surface-alt));
    --uilib-card-footer-bg: var(--uilib-card-footer-bg, var(--uilib-surface-alt));
  }

  &-minimal {
    --uilib-card-radius: 0;
    --uilib-card-shadow: var(--uilib-card-shadow-none, none);
    --uilib-card-shadow-hover: var(--uilib-card-shadow-low, var(--uilib-card-shadow-none, none));
    --uilib-card-header-bg: var(--uilib-card-bg, var(--uilib-surface));
    --uilib-card-footer-bg: var(--uilib-card-bg, var(--uilib-surface));
    --uilib-card-border: var(--uilib-border, currentColor);

    .card-header,
    .card-footer {
      position: relative;
    }

    .card-header {
      border-bottom: 0;

      &::after {
        content: '';
        position: absolute;
        left: var(--uilib-space-4);
        right: var(--uilib-space-4);
        bottom: 0;
        height: 1px;
        background: var(--uilib-card-border, var(--uilib-border, currentColor));
        opacity: 0.9;
      }
    }

    .card-footer {
      border-top: 0;

      &::before {
        content: '';
        position: absolute;
        left: var(--uilib-space-4);
        right: var(--uilib-space-4);
        top: 0;
        height: 1px;
        background: var(--uilib-card-border, var(--uilib-border, currentColor));
        opacity: 0.9;
      }
    }
  }

  .card-header-icon,
  .card-close-icon {
    flex-shrink: 0;
  }

  .card-close-icon {
    cursor: pointer;
  }
}
