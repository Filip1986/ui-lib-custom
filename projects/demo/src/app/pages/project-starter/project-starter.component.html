<app-doc-page-layout [sections]="sections">
  <div class="doc-header" docHeader>
    <h1>Project Starter</h1>
    <p class="doc-description">
      Configure a theme, preview components, and download starter assets (JSON, CSS, SCSS).
    </p>
  </div>

  <div class="doc-tabs">
    <ui-lib-tabs
      variant="minimal"
      size="small"
      [selectedValue]="activeTab()"
      (selectedChange)="onTabChange($event.value)"
    >
      <ui-lib-tab value="playground" label="Playground"></ui-lib-tab>
      <ui-lib-tab value="api-reference" label="API Reference"></ui-lib-tab>
      <ui-lib-tab value="usage" label="Usage"></ui-lib-tab>
    </ui-lib-tabs>
  </div>

  @if (activeTab() === 'playground') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="playground" data-doc-anchor>
      <div card-header>Playground</div>
      <p class="lead">Manage theme presets and preview common components with the selected theme.</p>

      <div class="controls">
        <div class="control-group">
          <label>Theme name</label>
          <input type="text" [ngModel]="themeName()" (ngModelChange)="themeName.set($event)" />
          <button type="button" class="chip" (click)="saveTheme()">Save Theme</button>
        </div>
        <div class="control-group">
          <label>Saved themes</label>
          <select [ngModel]="selectedSaved()" (ngModelChange)="selectedSaved.set($event); loadTheme($event)">
            <option value="">Select saved</option>
            @for (name of savedThemes(); track name) {
              <option [value]="name">{{ name }}</option>
            }
          </select>
          <button type="button" class="chip" (click)="deleteTheme(selectedSaved())" [disabled]="!selectedSaved()">Delete</button>
        </div>
        <div class="control-group">
          <label>Import theme.json</label>
          <input type="file" accept="application/json" (change)="importTheme($any($event.target).files)" />
        </div>
        <div class="actions">
          <button type="button" class="chip primary" (click)="exportStarterPackage()">Download Starter Package</button>
        </div>
        @if (message()) {
          <div class="message">{{ message() }}</div>
        }
      </div>

      <app-doc-demo-viewport>
        <div class="doc-demo">
          <div class="preview-grid">
            <ui-lib-card variant="material" elevation="medium">
              <div card-header>Buttons</div>
              <div class="stack">
                <ui-lib-button color="primary">Primary</ui-lib-button>
                <ui-lib-button color="secondary">Secondary</ui-lib-button>
                <ui-lib-button color="success">Success</ui-lib-button>
                <ui-lib-button color="danger">Danger</ui-lib-button>
              </div>
            </ui-lib-card>

            <ui-lib-card variant="material" elevation="medium">
              <div card-header>Inputs</div>
              <div class="stack">
                <ui-lib-input label="Email" placeholder="you@example.com"></ui-lib-input>
                <ui-lib-input label="Password" type="password" [showTogglePassword]="true" placeholder="••••••"></ui-lib-input>
              </div>
            </ui-lib-card>

            <ui-lib-card variant="material" elevation="medium">
              <div card-header>Select</div>
              <ui-lib-select label="Status" [options]="sampleOptions" [searchable]="true"></ui-lib-select>
            </ui-lib-card>
          </div>
        </div>
      </app-doc-demo-viewport>
    </ui-lib-card>
  }

  @if (activeTab() === 'api-reference') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="api-reference" data-doc-anchor>
      <div card-header>API Reference</div>
      <table class="doc-properties">
        <thead>
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><code>saveToLocalStorage(name)</code></td><td><code>void</code></td><td>Persists current theme preset under the provided name.</td></tr>
          <tr><td><code>loadFromLocalStorage(name)</code></td><td><code>void</code></td><td>Loads a saved preset and applies it.</td></tr>
          <tr><td><code>exportAsJSON(preset)</code></td><td><code>string</code></td><td>Exports the preset to JSON for reuse.</td></tr>
          <tr><td><code>exportAsCSS(preset)</code></td><td><code>string</code></td><td>Exports CSS variables for runtime theming.</td></tr>
          <tr><td><code>exportAsScss(preset)</code></td><td><code>string</code></td><td>Exports SCSS variables for build-time theming.</td></tr>
        </tbody>
      </table>
    </ui-lib-card>
  }

  @if (activeTab() === 'usage') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="usage" data-doc-anchor>
      <div card-header>Usage</div>
      <app-doc-code-snippet title="Theme persistence" [code]="snippets.usage"></app-doc-code-snippet>
    </ui-lib-card>
  }
</app-doc-page-layout>
