<app-doc-page-layout [sections]="sections">
  <div class="doc-header" docHeader>
    <h1>Composition</h1>
    <p class="doc-description">
      Compose layout primitives together for dashboards and page scaffolds.
    </p>
  </div>

  <div class="doc-tabs">
    <ui-lib-tabs
      variant="minimal"
      size="small"
      [selectedValue]="activeTab()"
      (selectedChange)="onTabChange($event.value)"
    >
      <ui-lib-tab value="demo" label="Demo" />
      <ui-lib-tab value="usage" label="Usage" />
      <ui-lib-tab value="api" label="API Reference" />
    </ui-lib-tabs>
  </div>

  @if (activeTab() === 'demo') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="composition" data-doc-anchor>
      <div card-header>Composition Playground</div>
      <p>Tweak container, stack, and grid props to see a dashboard layout adapt in real time.</p>
      <div class="doc-demo-group spacing-playground">
        <ui-lib-stack spacing="lg" class="spacing-stack">
          <div class="control-panel">
            <ui-lib-stack spacing="md">
              <div class="panel-title">
                <h4>Adjust layout</h4>
                <ui-lib-button appearance="ghost" size="small" (click)="resetControls()"
                  >Reset</ui-lib-button
                >
              </div>
              <div class="control-grid">
                <ui-lib-select
                  label="Container size"
                  [options]="sizeOptions"
                  [ngModel]="containerSize()"
                  (ngModelChange)="setContainerSize($event)"
                />
                <ui-lib-select
                  label="Container inset"
                  [options]="insetOptions"
                  [ngModel]="containerInset()"
                  (ngModelChange)="setContainerInset($event)"
                />
                <ui-lib-select
                  label="Stack spacing"
                  [options]="spacingOptions"
                  [ngModel]="stackSpacing()"
                  (ngModelChange)="setStackSpacing($event)"
                />
                <ui-lib-select
                  label="Grid spacing"
                  [options]="spacingOptions"
                  [ngModel]="gridSpacing()"
                  (ngModelChange)="setGridSpacing($event)"
                />
                <ui-lib-select
                  label="Grid columns"
                  [options]="gridColumnOptions"
                  [ngModel]="gridColumns()"
                  (ngModelChange)="setGridColumns($event)"
                />
                <ui-lib-select
                  label="Grid min width"
                  [options]="minWidthOptions"
                  [ngModel]="gridMinWidth()"
                  (ngModelChange)="setGridMinWidth($event)"
                />
                <ui-lib-select
                  label="Grid align"
                  [options]="alignOptions"
                  [ngModel]="gridAlign()"
                  (ngModelChange)="setGridAlign($event)"
                />
                <ui-lib-select
                  label="Grid justify"
                  [options]="justifyOptions"
                  [ngModel]="gridJustify()"
                  (ngModelChange)="setGridJustify($event)"
                />
                <ui-lib-select
                  label="Inline spacing"
                  [options]="inlineSpacingOptions"
                  [ngModel]="inlineSpacing()"
                  (ngModelChange)="setInlineSpacing($event)"
                />
              </div>

              <div class="token-readouts">
                <span>Container: {{ sizeLabel() }} / {{ insetLabel() }}</span>
                <span>Stack spacing: {{ stackLabel() }}</span>
                <span
                  >Grid: {{ gridColumnsLabel() }}, gap {{ gridSpacingLabel() }}, min
                  {{ gridMinWidthLabel() }}</span
                >
                <span>Grid align/justify: {{ gridAlignLabel() }} / {{ gridJustifyLabel() }}</span>
                <span>Inline spacing: {{ inlineSpacingLabel() }}</span>
              </div>
            </ui-lib-stack>
          </div>

          <app-doc-demo-viewport>
            <div class="doc-demo spacing-preview">
              <ui-lib-container
                [size]="containerSize()"
                [inset]="containerInset()"
                [centered]="true"
                style="background: #f5f5f5"
              >
                <ui-lib-stack [spacing]="stackSpacing()">
                  <h3>Dashboard Layout</h3>
                  <ui-lib-grid
                    [columns]="gridColumns()"
                    [spacing]="gridSpacing()"
                    [minColumnWidth]="gridMinWidth() || undefined"
                    [align]="gridAlign()"
                    [justify]="gridJustify()"
                  >
                    <div class="demo-card">
                      <ui-lib-stack spacing="sm">
                        <h4>Card 1</h4>
                        <p>Content goes here</p>
                        <ui-lib-inline [spacing]="inlineSpacing()">
                          <span class="demo-tag">Tag 1</span>
                          <span class="demo-tag">Tag 2</span>
                        </ui-lib-inline>
                      </ui-lib-stack>
                    </div>

                    <div class="demo-card">
                      <ui-lib-stack spacing="sm">
                        <h4>Card 2</h4>
                        <p>Content goes here</p>
                        <ui-lib-inline [spacing]="inlineSpacing()">
                          <span class="demo-tag">Tag 3</span>
                        </ui-lib-inline>
                      </ui-lib-stack>
                    </div>

                    <div class="demo-card">
                      <ui-lib-stack spacing="sm">
                        <h4>Card 3</h4>
                        <p>Content goes here</p>
                        <ui-lib-inline [spacing]="inlineSpacing()">
                          <span class="demo-tag">Tag 4</span>
                          <span class="demo-tag">Tag 5</span>
                          <span class="demo-tag">Tag 6</span>
                        </ui-lib-inline>
                      </ui-lib-stack>
                    </div>
                  </ui-lib-grid>
                </ui-lib-stack>
              </ui-lib-container>
            </div>
          </app-doc-demo-viewport>
        </ui-lib-stack>
      </div>
    </ui-lib-card>
  }

  @if (activeTab() === 'usage') {
    <ui-lib-card [showHeader]="true" [showFooter]="false">
      <div card-header>Usage</div>
      <app-doc-code-snippet title="Usage" [code]="usageSnippet"></app-doc-code-snippet>
    </ui-lib-card>
  }

  @if (activeTab() === 'api') {
    <ui-lib-card [showHeader]="true" [showFooter]="false">
      <div card-header>API Reference</div>
      <div class="doc-demo-group">
        <p>Composition combines Stack, Inline, Grid, and Container props. Key props include:</p>
        <ul>
          <li><code>spacing</code> on Stack/Inline/Grid for consistent gaps.</li>
          <li><code>columns</code> or <code>minColumnWidth</code> on Grid for layout control.</li>
          <li><code>inset</code> and <code>size</code> on Container for padding and max-width.</li>
        </ul>
      </div>
    </ui-lib-card>
  }
</app-doc-page-layout>
