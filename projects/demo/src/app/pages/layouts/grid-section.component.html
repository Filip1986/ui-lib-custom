<app-doc-page-layout [sections]="sections">
  <div class="doc-header" docHeader>
    <h1>Grid</h1>
    <p class="doc-description">CSS Grid primitive with semantic gaps and responsive columns.</p>
  </div>

  <div class="doc-tabs">
    <ui-lib-tabs
      variant="minimal"
      size="small"
      [selectedValue]="activeTab()"
      (selectedChange)="onTabChange($event.value)"
    >
      <ui-lib-tab value="demo" label="Demo" />
      <ui-lib-tab value="usage" label="Usage" />
      <ui-lib-tab value="api" label="API Reference" />
    </ui-lib-tabs>
  </div>

  @if (activeTab() === 'demo') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="grid" data-doc-anchor>
      <div card-header>Grid Playground</div>
      <p>Experiment with column counts, gaps, alignment, and responsive min widths.</p>
      <div class="doc-demo-group spacing-playground">
        <ui-lib-stack spacing="lg" class="spacing-stack">
          <div class="control-panel">
            <ui-lib-stack spacing="md">
              <div class="panel-title">
                <h4>Adjust grid</h4>
                <ui-lib-button appearance="ghost" size="small" (click)="resetControls()"
                  >Reset</ui-lib-button
                >
              </div>
              <div class="control-grid">
                <ui-lib-select
                  label="Spacing"
                  [options]="spacingOptions"
                  [ngModel]="spacing()"
                  (ngModelChange)="setSpacing($event)"
                />
                <ui-lib-select
                  label="Columns"
                  [options]="columnOptions"
                  [ngModel]="columns()"
                  (ngModelChange)="setColumns($event)"
                />
                <ui-lib-select
                  label="Min column width"
                  [options]="minWidthOptions"
                  [ngModel]="minWidth()"
                  (ngModelChange)="setMinWidth($event)"
                />
                <ui-lib-select
                  label="Align"
                  [options]="alignOptions"
                  [ngModel]="align()"
                  (ngModelChange)="setAlign($event)"
                />
                <ui-lib-select
                  label="Justify"
                  [options]="justifyOptions"
                  [ngModel]="justify()"
                  (ngModelChange)="setJustify($event)"
                />
              </div>

              <div class="token-readouts">
                <span>Spacing: {{ spacingLabel() }}</span>
                <span>Columns: {{ columnLabel() }}</span>
                <span>Min width: {{ minWidthLabel() }}</span>
                <span>Align: {{ alignLabel() }}</span>
                <span>Justify: {{ justifyLabel() }}</span>
              </div>
            </ui-lib-stack>
          </div>

          <app-doc-demo-viewport>
            <div class="doc-demo spacing-preview">
              <ui-lib-grid spacing="md" [columns]="2" class="preview-grid">
                <ui-lib-stack spacing="sm" class="preview-block">
                  <h4>Fixed grid</h4>
                  <ui-lib-grid
                    [columns]="columns()"
                    [spacing]="spacing()"
                    [align]="align()"
                    [justify]="justify()"
                  >
                    @for (i of [1, 2, 3, 4, 5, 6, 7, 8]; track i) {
                      <div class="demo-grid-cell">Cell {{ i }}</div>
                    }
                  </ui-lib-grid>
                </ui-lib-stack>

                <ui-lib-stack spacing="sm" class="preview-block">
                  <h4>Responsive (auto-fit)</h4>
                  <ui-lib-grid
                    [spacing]="spacing()"
                    [minColumnWidth]="minWidth() || undefined"
                    [align]="align()"
                    [justify]="justify()"
                  >
                    @for (i of [1, 2, 3, 4, 5, 6]; track i) {
                      <div class="demo-grid-cell large">Card {{ i }}</div>
                    }
                  </ui-lib-grid>
                </ui-lib-stack>
              </ui-lib-grid>
            </div>
          </app-doc-demo-viewport>
        </ui-lib-stack>
      </div>
    </ui-lib-card>
  }

  @if (activeTab() === 'usage') {
    <ui-lib-card [showHeader]="true" [showFooter]="false">
      <div card-header>Usage</div>
      <app-doc-code-snippet title="Usage" [code]="usageSnippet"></app-doc-code-snippet>
    </ui-lib-card>
  }

  @if (activeTab() === 'api') {
    <ui-lib-card [showHeader]="true" [showFooter]="false">
      <div card-header>API Reference</div>
      <div class="doc-demo-group">
        <table class="doc-table">
          <thead>
            <tr>
              <th>Prop</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>columns</code></td>
              <td><code>number</code></td>
              <td>Total columns for fixed grid.</td>
            </tr>
            <tr>
              <td><code>minColumnWidth</code></td>
              <td><code>string</code></td>
              <td>Auto-fit minimum width (e.g. 200px).</td>
            </tr>
            <tr>
              <td><code>spacing</code></td>
              <td><code>SpacingToken</code></td>
              <td>Semantic gap between cells.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </ui-lib-card>
  }
</app-doc-page-layout>
