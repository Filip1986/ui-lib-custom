<app-doc-page-layout [sections]="sections">
  <div class="doc-header" docHeader>
    <h1>Input</h1>
    <p class="doc-description">
      Configure variant, type, and helpers to see the live input preview.
    </p>
  </div>

  <app-code-preview [code]="inputExample">
    <ui-lib-input label="Email" placeholder="you@example.com" />
  </app-code-preview>

  <div class="doc-tabs">
    <ui-lib-tabs
      variant="minimal"
      size="small"
      [selectedValue]="activeTab()"
      (selectedChange)="onTabChange($event.value)"
    >
      <ui-lib-tab value="playground" label="Playground"></ui-lib-tab>
      <ui-lib-tab value="api-reference" label="API Reference"></ui-lib-tab>
      <ui-lib-tab value="usage" label="Usage"></ui-lib-tab>
      <ui-lib-tab value="performance" label="Performance"></ui-lib-tab>
    </ui-lib-tabs>
  </div>

  @if (activeTab() === 'playground') {
    <div class="doc-controls">
      <ui-lib-card class="doc-control-card" [showHeader]="true" [showFooter]="false">
        <div card-header>
          <div class="card-title">Style</div>
          <p class="card-description">Variant, input type, and label float behavior.</p>
        </div>
        <div class="control-grid">
          <div class="control">
            <label>Variant</label>
            <div class="chips">
              @for (v of variants; track v) {
                <ui-lib-button
                  class="control-chip"
                  size="small"
                  [variant]="'minimal'"
                  [appearance]="variant() === v ? 'solid' : 'ghost'"
                  color="primary"
                  (click)="setVariant(v)"
                  >{{ v }}</ui-lib-button
                >
              }
            </div>
            <label class="inline-toggle"
              ><input
                type="checkbox"
                [checked]="useGlobalVariant()"
                (change)="setFollowThemeVariant($any($event.target).checked)"
              />
              Follow theme variant</label
            >
          </div>

          <div class="control">
            <label>Type</label>
            <div class="chips">
              @for (t of types; track t) {
                <ui-lib-button
                  class="control-chip"
                  size="small"
                  [variant]="'minimal'"
                  [appearance]="inputType() === t ? 'solid' : 'ghost'"
                  color="primary"
                  (click)="setType(t)"
                  >{{ t }}</ui-lib-button
                >
              }
            </div>
          </div>

          <div class="control">
            <label>Label float</label>
            <div class="chips">
              @for (lf of labelFloats; track lf) {
                <ui-lib-button
                  class="control-chip"
                  size="small"
                  [variant]="'minimal'"
                  [appearance]="labelFloat() === lf ? 'solid' : 'ghost'"
                  color="primary"
                  (click)="setLabelFloat(lf)"
                  >{{ lf }}</ui-lib-button
                >
              }
            </div>
          </div>
        </div>
      </ui-lib-card>

      <ui-lib-card class="doc-control-card" [showHeader]="true" [showFooter]="false">
        <div card-header>
          <div class="card-title">Behavior</div>
          <p class="card-description">Toggle helpers and validation.</p>
        </div>
        <div class="toggles">
          <label
            ><input
              type="checkbox"
              [checked]="showCounter()"
              (change)="showCounter.set($any($event.target).checked)"
            />
            Show counter</label
          >
          <label
            ><input
              type="checkbox"
              [checked]="showClear()"
              (change)="showClear.set($any($event.target).checked)"
            />
            Show clear</label
          >
          <label
            ><input
              type="checkbox"
              [checked]="showToggle()"
              (change)="showToggle.set($any($event.target).checked)"
            />
            Password toggle</label
          >
          <label
            ><input
              type="checkbox"
              [checked]="required()"
              (change)="required.set($any($event.target).checked)"
            />
            Required</label
          >
        </div>
      </ui-lib-card>

      <ui-lib-card class="doc-control-card" [showHeader]="true" [showFooter]="false">
        <div card-header>
          <div class="card-title">Content</div>
          <p class="card-description">Update labels and placeholder copy.</p>
        </div>
        <div class="control">
          <label>Label</label>
          <input type="text" [value]="label()" (input)="label.set($any($event.target).value)" />
        </div>

        <div class="control">
          <label>Placeholder</label>
          <input
            type="text"
            [value]="placeholder()"
            (input)="placeholder.set($any($event.target).value)"
          />
        </div>
      </ui-lib-card>
    </div>

    <div class="viewport-control-stack">
      <ui-lib-card class="viewport-width-card" [showHeader]="true" [showFooter]="false">
        <div card-header>Viewport width</div>
        <div class="viewport-controls">
          <div class="preset-buttons">
            @for (preset of viewportPresets; track preset.key) {
              <ui-lib-button size="small" appearance="ghost" (click)="setViewportPreset(preset)">{{
                preset.label
              }}</ui-lib-button>
            }
            <div class="custom">
              <label>Custom</label>
              <input
                type="number"
                min="200"
                max="2000"
                [ngModel]="viewportCustomWidth()"
                (ngModelChange)="setViewportCustomWidth($event)"
              />
              <ui-lib-button size="small" appearance="ghost" (click)="applyViewportCustom()"
                >Apply</ui-lib-button
              >
            </div>
          </div>
          <div class="controls">
            <span class="dims">{{ viewportDisplayWidth() }} Ã— {{ viewportDisplayHeight() }}px</span>
            <ui-lib-button size="small" appearance="ghost" (click)="rotateViewport()"
              >Rotate</ui-lib-button
            >
          </div>
        </div>
      </ui-lib-card>

      <ui-lib-card class="viewport-density-card" [showHeader]="true" [showFooter]="false">
        <div card-header>Density</div>
        <div class="density-controls">
          <ui-lib-button
            size="small"
            appearance="ghost"
            (click)="setViewportDensity('default')"
            [class.active]="viewport?.densityValue() === 'default'"
            >Default</ui-lib-button
          >
          <ui-lib-button
            size="small"
            appearance="ghost"
            (click)="setViewportDensity('comfortable')"
            [class.active]="viewport?.densityValue() === 'comfortable'"
            >Comfortable</ui-lib-button
          >
          <ui-lib-button
            size="small"
            appearance="ghost"
            (click)="setViewportDensity('compact')"
            [class.active]="viewport?.densityValue() === 'compact'"
            >Compact</ui-lib-button
          >
        </div>
      </ui-lib-card>
    </div>

    <ui-lib-card [showHeader]="true" [showFooter]="false" id="playground" data-doc-anchor>
      <div card-header>Playground</div>

      <app-doc-demo-viewport>
        <div class="doc-demo centered" [appThemeScope]="appliedTheme()">
          <form #demoForm="ngForm" (ngSubmit)="onSubmit(demoForm)">
            <ui-lib-input
              [variant]="variant()"
              [type]="inputType()"
              [label]="label()"
              [labelFloat]="labelFloat()"
              [placeholder]="placeholder()"
              [required]="required()"
              [showCounter]="showCounter()"
              [maxLength]="80"
              [showClear]="showClear()"
              [error]="error()"
              [ngModel]="value()"
              (ngModelChange)="value.set($event)"
              name="demoInput"
            >
              <span prefix class="pi pi-envelope"></span>
              <span suffix class="pi pi-check"></span>
            </ui-lib-input>

            @if (inputType() === 'password') {
              <ui-lib-input
                [variant]="variant()"
                type="password"
                label="Password"
                [labelFloat]="labelFloat()"
                placeholder="Enter password"
                [showTogglePassword]="showToggle()"
                [showClear]="showClear()"
                [required]="required()"
                name="demoPassword"
                [ngModel]="password()"
                (ngModelChange)="password.set($event)"
              >
                <span prefix class="pi pi-lock"></span>
              </ui-lib-input>
            }

            <div class="actions">
              <ui-lib-button type="submit" color="primary">Submit</ui-lib-button>
              <ui-lib-button
                type="button"
                appearance="ghost"
                (click)="demoForm.resetForm(); value.set(''); password.set(''); error.set('')"
                >Reset</ui-lib-button
              >
            </div>
          </form>
        </div>
      </app-doc-demo-viewport>
    </ui-lib-card>
  }

  @if (activeTab() === 'api-reference') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="api-reference" data-doc-anchor>
      <div card-header>API Reference</div>
      <table class="doc-properties">
        <thead>
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>variant</code></td>
            <td><code>'material' | 'bootstrap' | 'minimal'</code></td>
            <td><code>'material'</code></td>
            <td>Visual style</td>
          </tr>
          <tr>
            <td><code>type</code></td>
            <td>
              <code>'text' | 'email' | 'password' | 'number' | 'search' | 'tel' | 'url'</code>
            </td>
            <td><code>'text'</code></td>
            <td>HTML input type</td>
          </tr>
          <tr>
            <td><code>labelFloat</code></td>
            <td><code>'over' | 'in' | 'on'</code></td>
            <td><code>'over'</code></td>
            <td>Label positioning</td>
          </tr>
          <tr>
            <td><code>placeholder</code></td>
            <td><code>string</code></td>
            <td><code>''</code></td>
            <td>Placeholder text</td>
          </tr>
          <tr>
            <td><code>required</code></td>
            <td><code>boolean</code></td>
            <td><code>false</code></td>
            <td>Mark input as required</td>
          </tr>
        </tbody>
      </table>
    </ui-lib-card>
  }

  @if (activeTab() === 'usage') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="usage" data-doc-anchor>
      <div card-header>Usage</div>
      <app-doc-code-snippet title="Usage" [code]="snippets.usage"></app-doc-code-snippet>
    </ui-lib-card>
  }

  @if (activeTab() === 'performance') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="performance" data-doc-anchor>
      <div card-header>Performance Features</div>
      <ul class="doc-list">
        <li><strong>OnPush Change Detection</strong> - only re-renders when inputs change</li>
        <li><strong>Signal-Based</strong> - uses Angular signals for optimal reactivity</li>
        <li><strong>Single Element</strong> - renders as single DOM element (no wrappers)</li>
        <li><strong>Design Tokens</strong> - uses centralized design system</li>
        <li><strong>Zero Runtime Logic</strong> - all styles computed via memoized signals</li>
        <li><strong>Host Bindings</strong> - direct style application (no ngClass overhead)</li>
      </ul>
    </ui-lib-card>
  }
</app-doc-page-layout>
