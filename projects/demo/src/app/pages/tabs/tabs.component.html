<app-doc-page-layout [sections]="sections">
  <div class="doc-header" docHeader>
    <h1>Tabs</h1>
    <p class="doc-description">
      Switch between content sections with accessible, theme-aware tabs. Configure variant, size,
      orientation, alignment, and lazy behavior in the playground.
    </p>
  </div>

  <app-code-preview [code]="tabsExample">
    <ui-lib-tabs>
      <ui-lib-tab label="Home">Home content</ui-lib-tab>
      <ui-lib-tab label="Profile">Profile content</ui-lib-tab>
    </ui-lib-tabs>
  </app-code-preview>

  <div class="doc-tabs">
    <ui-lib-tabs
      variant="minimal"
      size="small"
      [selectedValue]="activeTab()"
      (selectedChange)="onTabChange($event.value)"
    >
      <ui-lib-tab value="playground" label="Playground"></ui-lib-tab>
      <ui-lib-tab value="variants" label="Variants"></ui-lib-tab>
      <ui-lib-tab value="api-reference" label="API Reference"></ui-lib-tab>
      <ui-lib-tab value="usage" label="Usage"></ui-lib-tab>
      <ui-lib-tab value="accessibility" label="Accessibility"></ui-lib-tab>
    </ui-lib-tabs>
  </div>

  @if (activeTab() === 'playground') {
    <div class="doc-controls">
      <ui-lib-card class="doc-control-card" [showHeader]="true" [showFooter]="false">
        <div card-header>
          <div class="card-title">Style</div>
          <p class="card-description">Variant, size, orientation, alignment.</p>
        </div>
        <div class="control-grid">
          <div class="control">
            <label>Variant</label>
            <div class="chips">
              @for (v of variants; track v) {
                <ui-lib-button
                  class="control-chip"
                  size="small"
                  variant="minimal"
                  [appearance]="variant() === v ? 'solid' : 'ghost'"
                  color="primary"
                  (click)="setVariant(v)"
                  >{{ v }}</ui-lib-button
                >
              }
            </div>
          </div>

          <div class="control">
            <label>Size</label>
            <div class="chips">
              @for (s of sizes; track s) {
                <ui-lib-button
                  class="control-chip"
                  size="small"
                  variant="minimal"
                  [appearance]="size() === s ? 'solid' : 'ghost'"
                  color="primary"
                  (click)="setSize(s)"
                  >{{ s }}</ui-lib-button
                >
              }
            </div>
          </div>

          <div class="control">
            <label>Orientation</label>
            <div class="chips">
              @for (o of orientations; track o) {
                <ui-lib-button
                  class="control-chip"
                  size="small"
                  variant="minimal"
                  [appearance]="orientation() === o ? 'solid' : 'ghost'"
                  color="primary"
                  (click)="setOrientation(o)"
                  >{{ o }}</ui-lib-button
                >
              }
            </div>
          </div>

          <div class="control">
            <label>Alignment</label>
            <div class="chips">
              @for (a of aligns; track a) {
                <ui-lib-button
                  class="control-chip"
                  size="small"
                  variant="minimal"
                  [appearance]="align() === a ? 'solid' : 'ghost'"
                  color="primary"
                  (click)="setAlign(a)"
                  >{{ a }}</ui-lib-button
                >
              }
            </div>
          </div>
        </div>
      </ui-lib-card>

      <ui-lib-card class="doc-control-card" [showHeader]="true" [showFooter]="false">
        <div card-header>
          <div class="card-title">Behavior</div>
          <p class="card-description">Closable, lazy rendering, disabled.</p>
        </div>
        <div class="control-grid small">
          <div class="control">
            <label>Lazy rendering</label>
            <div class="chips">
              @for (mode of lazyModes; track mode) {
                <ui-lib-button
                  class="control-chip"
                  size="small"
                  variant="minimal"
                  [appearance]="lazy() === mode ? 'solid' : 'ghost'"
                  color="primary"
                  (click)="setLazy(mode)"
                  >{{ mode === false ? 'off' : mode }}</ui-lib-button
                >
              }
            </div>
          </div>
          <div class="toggles">
            <ui-lib-checkbox
              label="Scrollable (50 tabs)"
              [checked]="scrollable()"
              (checkedChange)="setScrollable($event)"
            />
            <ui-lib-checkbox
              label="Tab menu mode"
              [checked]="menuMode()"
              (checkedChange)="setMenuMode($event)"
            />
            <ui-lib-checkbox
              label="Closable"
              [checked]="closable()"
              (checkedChange)="toggleClosable($event)"
            />
            <ui-lib-checkbox
              label="Disable all"
              [checked]="disabledAll()"
              (checkedChange)="toggleDisabled($event)"
            />
            <ui-lib-select
              label="Per-tab lazy"
              [options]="perTabLazyOptions"
              [ngModel]="perTabLazy()"
              (ngModelChange)="setPerTabLazy($event)"
            />
          </div>
        </div>
      </ui-lib-card>
    </div>

    <ui-lib-card [showHeader]="true" [showFooter]="false" id="playground" data-doc-anchor>
      <div card-header>Playground</div>
      <p>Adjust the controls above to see the tabs update live.</p>

      <app-doc-demo-viewport>
        <div class="doc-demo" [appThemeScope]="appliedTheme()">
          <ui-lib-tabs
            [variant]="variant()"
            [size]="size()"
            [orientation]="orientation()"
            [align]="align()"
            [lazy]="lazy()"
            [scrollBehavior]="playgroundScrollBehavior()"
            [mode]="playgroundMode()"
            [closable]="closable()"
            [disabled]="disabledAll()"
          >
            @for (tab of playgroundTabsResolved(); track tab.value) {
              <ui-lib-tab
                [value]="tab.value"
                [label]="tab.label"
                [disabled]="!!tab.disabled"
                [closable]="!!tab.closable"
                [lazy]="tab.value === 'details' ? playgroundPerTabLazy() : undefined"
              >
                {{ tab.content }}
              </ui-lib-tab>
            }
          </ui-lib-tabs>
        </div>
      </app-doc-demo-viewport>
    </ui-lib-card>

    <div class="demo-grid">
      <ui-lib-card [showHeader]="true" [showFooter]="false">
        <div card-header>Basic tabs</div>
        <app-doc-demo-viewport>
          <div class="doc-demo">
            <ui-lib-tabs>
              <ui-lib-tab label="Home">Home content</ui-lib-tab>
              <ui-lib-tab label="Profile">Profile content</ui-lib-tab>
              <ui-lib-tab label="Settings">Settings content</ui-lib-tab>
            </ui-lib-tabs>
          </div>
        </app-doc-demo-viewport>
      </ui-lib-card>

      <ui-lib-card [showHeader]="true" [showFooter]="false">
        <div card-header>Scrollable tabs</div>
        <app-doc-demo-viewport>
          <div class="doc-demo scrollable-demo">
            <ui-lib-tabs scrollBehavior="arrows">
              @for (tab of scrollTabs; track tab.value) {
                <ui-lib-tab [value]="tab.value" [label]="tab.label">
                  {{ tab.content }}
                </ui-lib-tab>
              }
            </ui-lib-tabs>
          </div>
        </app-doc-demo-viewport>
      </ui-lib-card>

      <ui-lib-card [showHeader]="true" [showFooter]="false">
        <div card-header>Tab menu</div>
        <app-doc-demo-viewport>
          <div class="doc-demo">
            <ui-lib-tabs
              mode="navigation"
              [selectedValue]="navActive()"
              (navigate)="onNavigate($event.value)"
            >
              @for (tab of navTabs; track tab.value) {
                <ui-lib-tab [value]="tab.value">
                  <ng-template uiLibTabLabel>
                    <ui-lib-icon [name]="tab.icon" /> {{ tab.label }}
                  </ng-template>
                </ui-lib-tab>
              }
            </ui-lib-tabs>
            <div class="doc-note">Selected route: {{ navActive() }}</div>
          </div>
        </app-doc-demo-viewport>
      </ui-lib-card>

      <ui-lib-card [showHeader]="true" [showFooter]="false">
        <div card-header>Icon tabs</div>
        <app-doc-demo-viewport>
          <div class="doc-demo">
            <ui-lib-tabs variant="material">
              @for (tab of iconTabs; track tab.value) {
                <ui-lib-tab [value]="tab.value">
                  <ng-template uiLibTabLabel>
                    <ui-lib-icon [name]="tab.icon || ''" /> {{ tab.label }}
                  </ng-template>
                  {{ tab.content }}
                </ui-lib-tab>
              }
            </ui-lib-tabs>
          </div>
        </app-doc-demo-viewport>
      </ui-lib-card>

      <ui-lib-card [showHeader]="true" [showFooter]="false">
        <div card-header>Icon + text (stacked)</div>
        <app-doc-demo-viewport>
          <div class="doc-demo">
            <ui-lib-tabs variant="material" iconPosition="top">
              @for (tab of iconTextTabs; track tab.value) {
                <ui-lib-tab [value]="tab.value">
                  <ng-template uiLibTabLabel>
                    <ui-lib-icon [name]="tab.icon || ''" /> {{ tab.label }}
                  </ng-template>
                  {{ tab.content }}
                </ui-lib-tab>
              }
            </ui-lib-tabs>
          </div>
        </app-doc-demo-viewport>
      </ui-lib-card>

      <ui-lib-card [showHeader]="true" [showFooter]="false">
        <div card-header>Vertical tabs</div>
        <app-doc-demo-viewport>
          <div class="doc-demo">
            <ui-lib-tabs orientation="vertical" size="small">
              @for (tab of verticalTabs; track tab.value) {
                <ui-lib-tab [value]="tab.value" [label]="tab.label">
                  {{ tab.content }}
                </ui-lib-tab>
              }
            </ui-lib-tabs>
          </div>
        </app-doc-demo-viewport>
      </ui-lib-card>

      <ui-lib-card [showHeader]="true" [showFooter]="false">
        <div card-header>Closable tabs</div>
        <app-doc-demo-viewport>
          <div class="doc-demo">
            <ui-lib-tabs [closable]="true" (tabClose)="onCloseTab($event)">
              @for (tab of closableTabs(); track tab.value) {
                <ui-lib-tab [value]="tab.value" [label]="tab.label" [closable]="!!tab.closable">
                  {{ tab.content }}
                </ui-lib-tab>
              }
            </ui-lib-tabs>
            <ui-lib-button
              size="small"
              variant="minimal"
              appearance="ghost"
              (click)="resetClosableTabs()"
              >Reset tabs</ui-lib-button
            >
          </div>
        </app-doc-demo-viewport>
      </ui-lib-card>

      <ui-lib-card [showHeader]="true" [showFooter]="false">
        <div card-header>Disabled tabs</div>
        <app-doc-demo-viewport>
          <div class="doc-demo">
            <ui-lib-tabs>
              <ui-lib-tab label="Active">Active content</ui-lib-tab>
              <ui-lib-tab label="Disabled" [disabled]="true">Disabled content</ui-lib-tab>
              <ui-lib-tab label="Another">Another content</ui-lib-tab>
            </ui-lib-tabs>
          </div>
        </app-doc-demo-viewport>
      </ui-lib-card>

      <ui-lib-card [showHeader]="true" [showFooter]="false">
        <div card-header>Lazy loading</div>
        <app-doc-demo-viewport>
          <div class="doc-demo">
            <ui-lib-tabs lazy="keep-alive">
              @for (tab of lazyTabs; track tab.value) {
                <ui-lib-tab [value]="tab.value" [label]="tab.label">
                  {{ tab.content }}
                </ui-lib-tab>
              }
            </ui-lib-tabs>
          </div>
        </app-doc-demo-viewport>
      </ui-lib-card>

      <ui-lib-card [showHeader]="true" [showFooter]="false">
        <div card-header>Per-tab lazy</div>
        <app-doc-demo-viewport>
          <div class="doc-demo">
            <ui-lib-tabs>
              <ui-lib-tab label="Eager">Always rendered</ui-lib-tab>
              <ui-lib-tab label="Lazy keep-alive" lazy="keep-alive">
                <ng-template uiLibTabContent>
                  <ui-lib-card [showHeader]="false" [showFooter]="false">
                    <div>Deferred content (cached once activated).</div>
                  </ui-lib-card>
                </ng-template>
              </ui-lib-tab>
              <ui-lib-tab label="Lazy unmount" lazy="unmount">
                <ng-template uiLibTabContent>
                  <ui-lib-card [showHeader]="false" [showFooter]="false">
                    <div>Deferred content (destroyed on blur).</div>
                  </ui-lib-card>
                </ng-template>
              </ui-lib-tab>
            </ui-lib-tabs>
          </div>
        </app-doc-demo-viewport>
      </ui-lib-card>

      <ui-lib-card [showHeader]="true" [showFooter]="false">
        <div card-header>Controlled mode</div>
        <app-doc-demo-viewport>
          <div class="doc-demo">
            <div class="control-row">
              <ui-lib-button size="small" variant="minimal" (click)="selectControlled(0)"
                >Select first</ui-lib-button
              >
              <ui-lib-button size="small" variant="minimal" (click)="selectControlled(1)"
                >Select second</ui-lib-button
              >
              <ui-lib-button size="small" variant="minimal" (click)="selectControlled(2)"
                >Select third</ui-lib-button
              >
            </div>
            <ui-lib-tabs
              [selectedIndex]="controlledSelection()"
              (selectedChange)="onControlledChange($event)"
            >
              @for (tab of controlledTabs; track tab.value) {
                <ui-lib-tab [value]="tab.value" [label]="tab.label">
                  {{ tab.content }}
                </ui-lib-tab>
              }
            </ui-lib-tabs>
          </div>
        </app-doc-demo-viewport>
      </ui-lib-card>
    </div>
  }

  @if (activeTab() === 'variants') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="variants" data-doc-anchor>
      <div card-header>Variants</div>
      <p>Compare the three tab variants with a shared tab set.</p>

      <app-variant-comparison>
        <div material>
          <ui-lib-tabs variant="material">
            <ui-lib-tab label="Home">Home</ui-lib-tab>
            <ui-lib-tab label="Profile">Profile</ui-lib-tab>
            <ui-lib-tab label="Billing">Billing</ui-lib-tab>
          </ui-lib-tabs>
        </div>

        <div bootstrap>
          <ui-lib-tabs variant="bootstrap">
            <ui-lib-tab label="Home">Home</ui-lib-tab>
            <ui-lib-tab label="Profile">Profile</ui-lib-tab>
            <ui-lib-tab label="Billing">Billing</ui-lib-tab>
          </ui-lib-tabs>
        </div>

        <div minimal>
          <ui-lib-tabs variant="minimal">
            <ui-lib-tab label="Home">Home</ui-lib-tab>
            <ui-lib-tab label="Profile">Profile</ui-lib-tab>
            <ui-lib-tab label="Billing">Billing</ui-lib-tab>
          </ui-lib-tabs>
        </div>
      </app-variant-comparison>
    </ui-lib-card>
  }

  @if (activeTab() === 'api-reference') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="api-reference" data-doc-anchor>
      <div card-header>API Reference</div>
      <table class="doc-properties">
        <thead>
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>variant</code></td>
            <td><code>TabsVariant</code></td>
            <td><code>material</code></td>
            <td>Visual style (material, bootstrap, minimal)</td>
          </tr>
          <tr>
            <td><code>size</code></td>
            <td><code>TabsSize</code></td>
            <td><code>medium</code></td>
            <td>Control padding/typography</td>
          </tr>
          <tr>
            <td><code>orientation</code></td>
            <td><code>TabsOrientation</code></td>
            <td><code>horizontal</code></td>
            <td>Orientation of tab list</td>
          </tr>
          <tr>
            <td><code>align</code></td>
            <td><code>TabsAlignment</code></td>
            <td><code>start</code></td>
            <td>Alignment of tab triggers</td>
          </tr>
          <tr>
            <td><code>selectedIndex</code></td>
            <td><code>number</code></td>
            <td><code>null</code></td>
            <td>Controlled selection by index</td>
          </tr>
          <tr>
            <td><code>selectedValue</code></td>
            <td><code>TabsValue</code></td>
            <td><code>null</code></td>
            <td>Controlled selection by value</td>
          </tr>
          <tr>
            <td><code>lazy</code></td>
            <td><code>false | 'unmount' | 'keep-alive'</code></td>
            <td><code>false</code></td>
            <td>Panel rendering strategy</td>
          </tr>
          <tr>
            <td><code>scrollBehavior</code></td>
            <td><code>'auto' | 'arrows' | 'overflow-menu'</code></td>
            <td><code>auto</code></td>
            <td>Overflow handling for the tab list</td>
          </tr>
          <tr>
            <td><code>mode</code></td>
            <td><code>'default' | 'navigation'</code></td>
            <td><code>default</code></td>
            <td>Panel rendering vs navigation-only mode</td>
          </tr>
          <tr>
            <td><code>closable</code></td>
            <td><code>boolean</code></td>
            <td><code>false</code></td>
            <td>Show close affordance on tabs</td>
          </tr>
          <tr>
            <td><code>disabled</code></td>
            <td><code>boolean</code></td>
            <td><code>false</code></td>
            <td>Disable all tabs</td>
          </tr>
          <tr>
            <td><code>selectedChange</code></td>
            <td><code>&#123; value: TabsValue or null; index: number &#125;</code></td>
            <td>-</td>
            <td>Emits when selection changes</td>
          </tr>
          <tr>
            <td><code>selectedIndexChange</code></td>
            <td><code>number</code></td>
            <td>-</td>
            <td>Index-only selection change</td>
          </tr>
          <tr>
            <td><code>navigate</code></td>
            <td><code>&#123; value: TabsValue or null; index: number &#125;</code></td>
            <td>-</td>
            <td>Emits when a tab is selected in navigation mode</td>
          </tr>
          <tr>
            <td><code>tabClose</code></td>
            <td><code>&#123; value: TabsValue or null; index: number &#125;</code></td>
            <td>-</td>
            <td>Emits when a tab is closed</td>
          </tr>
        </tbody>
      </table>
    </ui-lib-card>
  }

  @if (activeTab() === 'usage') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="usage" data-doc-anchor>
      <div card-header>Usage</div>
      <app-doc-code-snippet title="Basic" [code]="snippets.basic"></app-doc-code-snippet>
      <app-doc-code-snippet title="Icon tabs" [code]="snippets.icons"></app-doc-code-snippet>
      <app-doc-code-snippet title="Vertical" [code]="snippets.vertical"></app-doc-code-snippet>
      <app-doc-code-snippet title="Closable" [code]="snippets.closable"></app-doc-code-snippet>
      <app-doc-code-snippet title="Controlled" [code]="snippets.controlled"></app-doc-code-snippet>
      <app-doc-code-snippet title="Scrollable" [code]="snippets.scrollable"></app-doc-code-snippet>
      <app-doc-code-snippet title="Tab menu" [code]="snippets.tabMenu"></app-doc-code-snippet>
      <app-doc-code-snippet title="Per-tab lazy" [code]="snippets.perTabLazy" />
    </ui-lib-card>
  }

  @if (activeTab() === 'accessibility') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="accessibility" data-doc-anchor>
      <div card-header>Accessibility</div>
      <ul class="doc-list">
        <li>
          Uses <code>role="tablist"</code>, <code>role="tab"</code>, and
          <code>role="tabpanel"</code> for structure.
        </li>
        <li>Roving tabindex keeps one tabbable trigger; arrow keys navigate per orientation.</li>
        <li>
          <code>aria-selected</code>, <code>aria-controls</code>, and
          <code>aria-labelledby</code> link tabs to panels.
        </li>
        <li>
          Disabled tabs set <code>aria-disabled="true"</code> and are skipped by keyboard
          navigation.
        </li>
        <li>
          Indicator and focus styles use design tokens for contrast; provide
          <code>aria-label</code> for icon-only tabs.
        </li>
      </ul>
    </ui-lib-card>
  }

  <ui-lib-card [showHeader]="true" [showFooter]="false">
    <div card-header>RTL Tabs</div>
    <app-doc-demo-viewport>
      <section class="doc-demo rtl-demo" dir="rtl">
        <h3>RTL Mode</h3>
        <ui-lib-tabs>
          <ui-lib-tab value="1" label="כרטיסייה 1">תוכן ראשון</ui-lib-tab>
          <ui-lib-tab value="2" label="כרטיסייה 2">תוכן שני</ui-lib-tab>
          <ui-lib-tab value="3" label="כרטיסייה 3">תוכן שלישי</ui-lib-tab>
        </ui-lib-tabs>
      </section>
    </app-doc-demo-viewport>
  </ui-lib-card>
</app-doc-page-layout>
