<app-doc-page-layout [sections]="sections">
  <div class="doc-header" docHeader>
    <h1>Checkbox</h1>
    <p class="doc-description">
      Accessible, variant-aware checkbox for forms and preference toggles. Adjust the controls to
      preview styles, sizes, and state handling in real time.
    </p>
  </div>

  <app-code-preview [code]="checkboxExample">
    <ui-lib-checkbox label="Receive updates" [(checked)]="checkedPrimary"></ui-lib-checkbox>
  </app-code-preview>

  <div class="doc-tabs">
    <ui-lib-tabs
      variant="minimal"
      size="small"
      [selectedValue]="activeTab()"
      (selectedChange)="onTabChange($event.value)"
    >
      <ui-lib-tab value="playground" label="Playground"></ui-lib-tab>
      <ui-lib-tab value="variants" label="Variants"></ui-lib-tab>
      <ui-lib-tab value="api-reference" label="API Reference"></ui-lib-tab>
      <ui-lib-tab value="usage" label="Usage"></ui-lib-tab>
      <ui-lib-tab value="accessibility" label="Accessibility"></ui-lib-tab>
    </ui-lib-tabs>
  </div>

  @if (activeTab() === 'playground') {
    <div class="doc-controls">
      <ui-lib-card class="doc-control-card" [showHeader]="true" [showFooter]="false">
        <div card-header>
          <div class="card-title">Style</div>
          <p class="card-description">Switch appearance and sizing.</p>
        </div>
        <div class="control-grid">
          <div class="control">
            <label>Variant</label>
            <div class="chips">
              @for (v of variants; track v) {
                <ui-lib-button
                  class="control-chip"
                  size="small"
                  [variant]="'minimal'"
                  [appearance]="variant() === v ? 'solid' : 'ghost'"
                  color="primary"
                  (click)="selectVariant(v)"
                  >{{ v }}</ui-lib-button
                >
              }
            </div>
          </div>

          <div class="control">
            <label>Size</label>
            <div class="chips">
              @for (s of sizes; track s) {
                <ui-lib-button
                  class="control-chip"
                  size="small"
                  [variant]="'minimal'"
                  [appearance]="size() === s ? 'solid' : 'ghost'"
                  color="primary"
                  (click)="selectSize(s)"
                  >{{ s }}</ui-lib-button
                >
              }
            </div>
          </div>

          <div class="control">
            <label>Label</label>
            <input type="text" [value]="label()" (input)="label.set($any($event.target).value)" />
          </div>
        </div>
      </ui-lib-card>

      <ui-lib-card class="doc-control-card" [showHeader]="true" [showFooter]="false">
        <div card-header>
          <div class="card-title">State</div>
          <p class="card-description">Toggle interaction states.</p>
        </div>
        <div class="control-grid">
          <div class="toggles">
            <label
              ><input
                type="checkbox"
                [checked]="disabled()"
                (change)="disabled.set($any($event.target).checked)"
              />
              Disabled</label
            >
            <label
              ><input
                type="checkbox"
                [checked]="indeterminate()"
                (change)="indeterminate.set($any($event.target).checked)"
              />
              Indeterminate</label
            >
            <label
              ><input
                type="checkbox"
                [checked]="showDescription()"
                (change)="showDescription.set($any($event.target).checked)"
              />
              Show description</label
            >
          </div>

          <div class="control">
            <label>Description</label>
            <textarea
              rows="2"
              [value]="description()"
              (input)="description.set($any($event.target).value)"
            ></textarea>
          </div>
        </div>
      </ui-lib-card>
    </div>

    <div class="viewport-control-stack">
      <ui-lib-card class="viewport-width-card" [showHeader]="true" [showFooter]="false">
        <div card-header>Viewport width</div>
        <div class="viewport-controls">
          <div class="preset-buttons">
            @for (preset of viewportPresets; track preset.key) {
              <ui-lib-button size="small" appearance="ghost" (click)="setViewportPreset(preset)">{{
                preset.label
              }}</ui-lib-button>
            }
            <div class="custom">
              <label>Custom</label>
              <input
                type="number"
                min="200"
                max="2000"
                [ngModel]="viewportCustomWidth()"
                (ngModelChange)="setViewportCustomWidth($event)"
              />
              <ui-lib-button size="small" appearance="ghost" (click)="applyViewportCustom()"
                >Apply</ui-lib-button
              >
            </div>
          </div>
          <div class="controls">
            <span class="dims">{{ viewportDisplayWidth() }} Ã— {{ viewportDisplayHeight() }}px</span>
            <ui-lib-button size="small" appearance="ghost" (click)="rotateViewport()"
              >Rotate</ui-lib-button
            >
          </div>
        </div>
      </ui-lib-card>

      <ui-lib-card class="viewport-density-card" [showHeader]="true" [showFooter]="false">
        <div card-header>Density</div>
        <div class="density-controls">
          <ui-lib-button
            size="small"
            appearance="ghost"
            (click)="setViewportDensity('default')"
            [class.active]="viewport?.densityValue() === 'default'"
            >Default</ui-lib-button
          >
          <ui-lib-button
            size="small"
            appearance="ghost"
            (click)="setViewportDensity('comfortable')"
            [class.active]="viewport?.densityValue() === 'comfortable'"
            >Comfortable</ui-lib-button
          >
          <ui-lib-button
            size="small"
            appearance="ghost"
            (click)="setViewportDensity('compact')"
            [class.active]="viewport?.densityValue() === 'compact'"
            >Compact</ui-lib-button
          >
        </div>
      </ui-lib-card>
    </div>

    <ui-lib-card [showHeader]="true" [showFooter]="false" id="playground" data-doc-anchor>
      <div card-header>Playground</div>
      <p>Use the controls to explore variants, sizes, and states.</p>

      <app-doc-demo-viewport>
        <div class="doc-demo stack">
          <ui-lib-checkbox
            class="demo-checkbox"
            [variant]="variant()"
            [size]="size()"
            [disabled]="disabled()"
            [indeterminate]="indeterminate()"
            [label]="label()"
            [description]="playgroundDescription()"
            [checked]="checkedPrimary"
            (checkedChange)="onPrimaryChange($event)"
          ></ui-lib-checkbox>

          <ui-lib-checkbox
            class="demo-checkbox"
            [variant]="variant()"
            [size]="size()"
            label="Projected label"
            description="Content projection works too."
            [checked]="checkedSecondary"
            (checkedChange)="onSecondaryChange($event)"
          >
            <span
              >Projected label <small>({{ size() }})</small></span
            >
          </ui-lib-checkbox>

          <div class="doc-note">
            <strong>State:</strong>
            @if (indeterminate()) {
              Mixed
            } @else if (checkedPrimary) {
              Checked
            } @else {
              Unchecked
            }
          </div>
        </div>
      </app-doc-demo-viewport>
    </ui-lib-card>
  }

  @if (activeTab() === 'variants') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="variants" data-doc-anchor>
      <div card-header>Variants</div>
      <p>Compare checkbox variants with the same label and size.</p>

      <app-variant-comparison>
        <div material>
          <ui-lib-checkbox
            variant="material"
            [size]="size()"
            [label]="label()"
            [checked]="checkedPrimary"
            (checkedChange)="onPrimaryChange($event)"
          ></ui-lib-checkbox>
        </div>

        <div bootstrap>
          <ui-lib-checkbox
            variant="bootstrap"
            [size]="size()"
            [label]="label()"
            [checked]="checkedPrimary"
            (checkedChange)="onPrimaryChange($event)"
          ></ui-lib-checkbox>
        </div>

        <div minimal>
          <ui-lib-checkbox
            variant="minimal"
            [size]="size()"
            [label]="label()"
            [checked]="checkedPrimary"
            (checkedChange)="onPrimaryChange($event)"
          ></ui-lib-checkbox>
        </div>
      </app-variant-comparison>
    </ui-lib-card>
  }

  @if (activeTab() === 'api-reference') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="api-reference" data-doc-anchor>
      <div card-header>API Reference</div>
      <table class="doc-properties">
        <thead>
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>label</code></td>
            <td><code>string | null</code></td>
            <td><code>null</code></td>
            <td>Optional text label (use projection for custom markup).</td>
          </tr>
          <tr>
            <td><code>description</code></td>
            <td><code>string | null</code></td>
            <td><code>null</code></td>
            <td>Supporting text rendered under the label.</td>
          </tr>
          <tr>
            <td><code>variant</code></td>
            <td><code>'material' | 'bootstrap' | 'minimal'</code></td>
            <td><code>'material'</code></td>
            <td>Controls visual treatment of the control box.</td>
          </tr>
          <tr>
            <td><code>size</code></td>
            <td><code>'sm' | 'md' | 'lg'</code></td>
            <td><code>'md'</code></td>
            <td>Adjusts checkbox dimensions and typography.</td>
          </tr>
          <tr>
            <td><code>disabled</code></td>
            <td><code>boolean</code></td>
            <td><code>false</code></td>
            <td>Disables click and keyboard interaction.</td>
          </tr>
          <tr>
            <td><code>indeterminate</code></td>
            <td><code>boolean</code></td>
            <td><code>false</code></td>
            <td>Shows the mixed state (aria-checked="mixed").</td>
          </tr>
          <tr>
            <td><code>checked</code></td>
            <td><code>boolean</code></td>
            <td><code>false</code></td>
            <td>Two-way bound value via <code>[(checked)]</code>.</td>
          </tr>
        </tbody>
      </table>
    </ui-lib-card>
  }

  @if (activeTab() === 'usage') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="usage" data-doc-anchor>
      <div card-header>Usage</div>
      <app-doc-code-snippet title="Usage" [code]="snippets.usage"></app-doc-code-snippet>
    </ui-lib-card>
  }

  @if (activeTab() === 'accessibility') {
    <ui-lib-card [showHeader]="true" [showFooter]="false" id="accessibility" data-doc-anchor>
      <div card-header>Accessibility</div>
      <ul class="doc-list">
        <li>
          <strong>Role driven:</strong> rendered host exposes <code>role="checkbox"</code>,
          <code>aria-checked</code>, and tabindex.
        </li>
        <li>
          <strong>Keyboard:</strong> Space & Enter toggle the state; focus ring uses CSS vars for
          WCAG-compliant contrast.
        </li>
        <li>
          <strong>Labeling:</strong> Provide <code>label</code> / projected content or use
          <code>ariaLabel</code> for icon-only cases.
        </li>
        <li>
          <strong>Indeterminate:</strong> Parent form logic should clear
          <code>indeterminate</code> after user action.
        </li>
      </ul>
    </ui-lib-card>
  }
</app-doc-page-layout>
